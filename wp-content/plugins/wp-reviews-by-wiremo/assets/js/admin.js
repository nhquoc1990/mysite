(function($){$(window).load(function(){$(document).on("click",".wrmr-account",function(){$.post(ajaxurl,{action:"wrmr_oauth_user"},function(data){$(".load-account-box").html(data)});return false});$(document).on("click",".wiremo-container .step1 .wrmr-register-step",function(){var step=$(this).attr("data-step");if(step=="step2"){$(".wiremo-container .step1").addClass("hidden");$(".wiremo-container .step2").removeClass("hidden");$(".wiremo-container .step2").addClass("show")}else{$(".wiremo-container .step1").addClass("hidden");$(".wiremo-container .step3").removeClass("hidden");$(".wiremo-container .step3").addClass("show")}});$(document).on("click",".wiremo-container .step2 .wrmr-register-back",function(){$(".wiremo-container .step2").removeClass("show");$(".wiremo-container .step2").addClass("hidden");$(".wiremo-container .step3").removeClass("hidden");$(".wiremo-container .step3").addClass("show")});$(document).on("click",".wrmr-register-account",function(){var $this=$(this);$this.attr("disabled",true);var response,noticeError="",apiKey;var step=$(this).attr("data-action");var firstName=$(".wiremo-container ."+step+" .wrmr-first-name").val();var lastName=$(".wiremo-container ."+step+" .wrmr-last-name").val();var email=$(".wiremo-container ."+step+" .wrmr-email").val();$.post(ajaxurl,{action:"wrmr_auto_register",firstName:firstName,lastName:lastName,email:email},function(data){response=JSON.parse(data);if(response.message){if(response.success==true){apiKey=response.apiKey;$.post(ajaxurl,{action:"wrmr_add_register_hook",apiKey:apiKey},function(){window.location.reload(true)})}else{$(".wiremo-container ."+step).removeClass("show");$(".wiremo-container ."+step).addClass("hidden");$(".wiremo-container .step1").removeClass("hidden");$(".wiremo-container .step1").addClass("show");noticeError='<div class="notice notice-error is-dismissible"><p>'+response.message+"</p></div>"}$(".wiremo-container .load-account-box").html(noticeError);$(".wiremo-container .load-account-box").removeClass("hidden");$(".wiremo-container .load-account-box").addClass("show")}$this.attr("disabled",false)});return false})});$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip()})})(jQuery);