jQuery(document).ready(function($){tinymce.create("tinymce.plugins.wiremo_plugin",{init:function(ed,url){ed.addCommand("wiremo_insert_shortcode",function(a,params){var popup=params.identifier;tb_show("Insert Shortcode",url+"/popup.php?popup="+popup+"&width="+800)});ed.addButton("wiremo_button",{type:"splitbutton",icon:false,title:"Insert wiremo shortcodes",image:url+"/images/icon-wp.png",classes:"wr-icon-editor",onclick:function(e){},menu:[{text:"Widget lite",onclick:function(){selected=tinyMCE.activeEditor.selection.getContent();if(selected){content='[wr-widget-lite data-type="1" source=""]'+selected+'[/wr-widget-lite]'}else{content='[wr-widget-lite data-type="1" source=""]'}tinymce.execCommand("mceInsertContent",false,content)}},{text:"Widget reviews",onclick:function(){selected=tinyMCE.activeEditor.selection.getContent();if(selected){content='[wr-widget-reviews source=""]'+selected+'[/wr-widget-reviews]'}else{content='[wr-widget-reviews source=""]'}tinymce.execCommand("mceInsertContent",false,content)}}]})}});tinymce.PluginManager.add("wiremo_button",tinymce.plugins.wiremo_plugin)});